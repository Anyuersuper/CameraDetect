# 基于 OpenCV 和 YOLOv4 的目标检测与视频录制系统

## 项目简介
本项目是一个基于 OpenCV 和 YOLOv4 的智能视频监控系统，实现了以下功能：

- 人脸检测：使用 OpenCV 进行面部检测。
- 目标检测：利用 YOLOv4 进行车辆和行人检测。
- GUI 设计：基于 Tkinter 进行界面开发。
- 视频处理：
  - 录制视频，并支持分辨率和帧率的动态切换。
  - 播放本地保存的视频，并可调节分辨率和帧率。
  - 定时保存视频：录制过程中支持定时自动保存当前视频文件，便于避免丢失数据。

## 功能特点

### 视频录制
- 支持多种分辨率（480p/720p/1080p）
- 可配置录制时间间隔
- 自动分段存储
- 支持实时预览

### 目标检测
- 人脸检测：实时检测画面中的人脸
- 车辆检测：支持多种类型车辆的检测
- 行人检测：实时检测画面中的行人
- 检测结果可视化：实时显示检测框和置信度

### 视频播放
- 支持多种播放分辨率
- 可调节播放帧率
- 进度条控制
- 快进/后退功能
- 支持暂停/继续播放

### 系统配置
- 存储路径设置
- 录制参数配置
- 检测参数调整
- 界面主题切换

## 环境要求
- Python 3.11
- OpenCV 4.5.5
- NumPy 1.21.6
- Pillow 11.1.0

## 使用教程：
1. 克隆项目：
   ```bash
   git clone https://github.com/Anyuersuper/CameraDetect
   ```
   
2. 安装依赖：
   ```bash
   pip install opencv-python
   pip install -r requirements.txt
   ```

3. 运行程序：
   ```bash
   python main.py
   ```

## 界面预览

### 主界面
![主界面](https://github.com/user-attachments/assets/6483c651-c072-4fac-9ad4-ad7ec83b80c8)

### 目标检测效果
![识别效果](https://github.com/user-attachments/assets/14a9866a-d362-402f-91a6-23294244d693)

### 读取本地视频
![读取视频](https://github.com/user-attachments/assets/04ae31dd-1379-4d95-9d04-389955ee225b)

## 项目结构
```
CameraDetect/
├── main.py              # 主程序入口
├── VideoRecorder.py     # 视频录制模块
├── VideoPlayer.py       # 视频播放模块
├── Yolo4Detect.py       # 目标检测模块
├── config.info          # 配置文件
├── requirements.txt     # 项目依赖
└── README.md           # 项目说明文档
```

## 配置说明
系统配置文件 `config.info` 包含以下设置：
- 存储路径：视频文件的保存位置
- 录制时间间隔：自动保存视频的时间间隔
- 检测参数：目标检测的灵敏度设置
- 播放参数：视频播放的默认设置

## 常见问题
1. 摄像头无法打开
   - 检查摄像头是否被其他程序占用
   - 确认摄像头驱动是否正确安装

2. 检测效果不理想
   - 调整检测参数
   - 确保环境光线充足
   - 检查摄像头分辨率设置

3. 视频播放卡顿
   - 降低播放分辨率
   - 减少播放帧率
   - 检查系统资源占用

## 更新日志
### v1.0.0 (2024-03-xx)
- 初始版本发布
- 实现基础功能
- 完成界面设计

## 待优化功能
- [ ] 添加更多目标检测类别
- [ ] 支持更多视频格式
- [ ] 优化检测性能
- [ ] 添加数据统计功能
- [ ] 支持网络摄像头

## 贡献指南
欢迎提交 Issue 和 Pull Request 来帮助改进项目。在提交代码前，请确保：
1. 代码符合 PEP 8 规范
2. 添加必要的注释
3. 更新相关文档
4. 通过所有测试

## 许可证
本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 作者
- 作者：[您的名字]
- 邮箱：[您的邮箱]

## 致谢
感谢所有为本项目提供帮助和建议的贡献者。

---

## 总结
本项目利用 OpenCV 进行人脸检测，使用 YOLOv4 进行目标检测，并结合 Tkinter 开发了 GUI 进行视频处理，包括视频录制、回放及参数调整。你可以根据需求进行优化，比如增加更多检测功能、支持不同格式的视频等。

---


